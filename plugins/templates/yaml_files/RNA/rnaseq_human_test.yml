---
global:
  - indir: data/processed
  - outdir: dont_change_this_value
  - base_dir: dont_change_this_input_value
  - user_dir: dont_change_this_value
  - hisat_align: '{$self->user_dir}/{$sample}/samtools_sort/{$sample}_hisat2.sorted.bam'
  - sample_rule: (.*)$
  - by_sample_outdir: '1'
  - find_by_dir: '1'
  - jira_ticket: "ticket-num"
  - root_in_dir: "data/processed"
  - root_out_dir: "{$self->user_dir}"
  - analysis_dir: "{$self->user_dir}"
  - REFERENCE: '/scratch/Reference_Genomes/Public/Vertebrate_mammalian/Homo_sapiens/ENSEMBL-release-81-GRCh38/Homo_sapiens.GRCh38.dna.toplevel'
  - KREFERENCE: "/scratch/Reference_Genomes/Public/Vertebrate_mammalian/Homo_sapiens/ENSEMBL-release-81-GRCh38/tr_Homo_sapiens.GRCh38/kallisto_Homo_sapiens.GRCh38.81"
  - ANNOTATION: '/scratch/Reference_Genomes/Public/Vertebrate_mammalian/Homo_sapiens/ENSEMBL-release-81-GRCh38/Homo_sapiens.GRCh38.81.gtf'
  - HPC:
      - module: gencore gencore_rnaseq gencore_qc gencore_biosails
      - commands_per_node: '1'
      - cpus_per_task: '1'
rules:
  - hisat2:
      local:
        - INPUT: '{$self->root_in_dir}/{$sample}/fastp'
        - OUTPUT: '{$self->outdir}/{$sample}_hisat2.sam'
        - HPC:
            - walltime: '03:00:00'
            - mem: 30GB
            - cpus_per_task: '8'
      process: |
        #TASK tags={$sample}
        hisat2 \
        -x {$self->REFERENCE} \
        --dta \
        -p 24 \
        -1 {$self->INPUT}/{$sample}_fastp_read1.fastq.gz \
        -2 {$self->INPUT}/{$sample}_fastp_read2.fastq.gz \
        -S {$self->OUTPUT}

